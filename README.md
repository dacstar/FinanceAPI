# 카카오페이 사전과제


## 필수조건

- API 기능명세에 나온 API를 개발하세요
- 데이터 속성 관리 및 매핑을 위한 ORM(Object Relational Mapping)을 사용하여 각 엔티티를 정의하고 레퍼지토리를 개발하세요. o
- 단위 테스트 (Unit Test) 코드를 개발하여 각 기능을 검증하세요. 
- 모든 입/출력은 JSON 형태로 주고 받습니다. 
- README.md 파일을 추가하여, 개발 프레임워크, 문제해결 전략, 빌드 및 실행 방법을 기술하세요. 
- 단, 각 API의 HTTP Method들( GET | POST | PUT | DEL )은 알아서 선택하세요


   

## 기본API구현사항

#### 데이터형식

1. 주택금융 공급현황 분석 데이터
2. CSV 파일로 ',' 구분자



### 첫번째 문제

- 데이터 파일에서 각 레코드를 데이터베이스에 저장하는 API 개발

```
<해결전략>

1.외부 라이브러리 CSVReder를 사용하여 문서를 읽어온다.
2.첫번째줄은 데이터가 아님으로 제외하고 그 다음줄 부터 가져온다.
3.최종 ','를 구분자로 데이터들을 추출한후 각 Entity 칼럼에 매핑한다.
```

### 두번째 문제

- 주택금융 공급 금융기관(은행) 목록을 출력하는 API를 개발하세요
- 년도별 각 금융기관의 지원금액 합계를 출력하는 API를 개발하세요. 

```
<해결전략>

1.최신연도와 오래된 연도를 구한다.
2.전체 데이터에서 제일 오래된 연도부터 연도별 공급현황을 가져온다.
3.연도별 공급현황에서 월별 공급 현황을 파악한다
4.연도별 월별 현황을 파악한다.
**문제점**
공급량에 처음에는 숫자만 들어있었으나 천단위부터 구분자가존재해서 처리가 필요했다.
**해결방안**
효율성부분이 부족하지만 자료를 String으로 받아 String 라이브러리 replace(",","")를 사용하여 구분자를 없애준후 Integer 매핑 하지만 천단위 구분자가 없는 데이터도 모두 같은 처리를 해야하는 문제점이있다.
5.가장 마지막 월까지 공급량을 파악한후 연도별로 저장한다.
```

### 세번째 문제



- 각 년도별 각 기관의 전체 지원금액 중에서 가장 큰 금액의 기관명을 출력하는 API 개발 

```
<해결전략>

1.1번에서 해결했던 연도별 주택금융 공급량을 가져온다.
2.연도별로 detail_amount를 구한한다.
3.주택도시기금을 제외함 값들을 연도별로 찾은후 제일 많이 지원받은 금융기관을 저장한다.
**문제점**
최대값과 저장을 어떻게 할까 고민을 하였지만 간결성을 포기하고 최대값을 구한다음에 map에서 기관명을 빼오는 방식을 사용했다.
**보안사항**
전체적인 코딩을 마치고 다시 살펴보니 Comparable을 이용했다면 좀 더 효율성과,코드의 복잡성을 줄일수 있었을거라고 생각된다.
4.연도별로 구한 가장 큰 금액의 기관명을 금융기관을 출력한다.
```



### 네번째 문제

- 전체 년도(2005~2016)에서 외환은행의 지원금액 평균 중에서 가장 작은 금액과 큰 금액을 출력하는 API 개발 

  -  예를들어, 2005년 ~2017년 중에 2010년 국민은행의 전체 예를들어, 2005년 ~ 2016년 외환은행의 평균 지원금액 (매년 12달의 지원금액 평균값)을 계산하여 가장 작은 값과 큰 값을 출력합니다. 소수점 이하는 반올림해서 계산하세요. 

  

  ```
  <해결전략>
  세번째 문제와 비슷하게 해결책을 가져왔지만 lombok을 사용함으로써 객체의 Json변환이 되지 않았던 문제가 있었다.
  1.전체 주택 공급량을 가져온다.
  2.연도별로 detail_amount를 구한다
  3.나머지 기관을 제외한 외환은행의 연도별 금융 지원금액을 가져온다.
  4.최저와 최고의 연도와 지원금액을 구해야했기때문에 Comparable을구현했다.
  5.List에 연도별 값을을 넣고 Collections.sort를 활용하여 정렬시켰다.
  6.정렬된 값들을 받아와 출력한다.
  **문제점**
  lombok을 사용하여서 Dto에 다른 객체를 넣어 Json으로 뿌려주려고 했으나 lombok을 사용하여 객체안에 객체를 넣어 뿌려줄 경우 Json으로 변환되지 않는 에러가 있었다.
  **해결방안**
  lombok 어노테이션(@)을 사용하지않고 직접 getter과 setter 메소드를 생성하여 출력하였더니 정상적으로 Json변환되어 뿌려졌다.
  
  
  ```

  ### 다섯번째 문제(선택사항)

  - 특정 은행의 특정 달에 대해서 2018년도 해당 달에 금융지원 금액을 예측하는 API 개발 

    단, 예측 알고리즘을 무엇을 써야하는지에 대한 제약은 없지만, 가장 근사치에 가까울 수록 높은 점수 부여. 

    ```
    <해결전략>
    처음앤 빅데이터나 AI를 사용하여 예측모델을 만들어서 결과값을 받아와야하나 고민했다.
    하지만 '알고리즘'을 써야한다는 것에서 힌트를 얻어서 대학교 학부시절 컴퓨터비젼프로그래밍 수업을 들었을때 SVD알고리즘으로 값을예측한다는 말이 어렴풋이 생각나서 시도를 시작했다. 
    1.각 연도별 달의 금융기관 공급량을 찾은다음에 2차원 배열로 넣어주었다.
    (예특을 위한 데이터 수집)
    2.행렬곱같은 경우 Matlab이나 Python을 이용하는 경우가 많은데 svd역시 값들을 그래프에 넣고 기울기의 방정식을 구하는 방식이라 선형대수학을 사용해야했다.
    3.JAVA에서 선형대수학을 사용할수있는 JAMA를 사용하여 행렬곱의 힌트를 얻었다.
    4.SVD값을 구한뒤 우리가 원하는 모델의 방정식의 변수들을 구하였다.
    5.방정식의 해를 구할수있는 변수들을 찾은후 원하는 원하는 연도의 기울기의 값을 예측할수 있었다.
    6.기울기는 즉 주택금융 공급량이며 근사값으로 예측되었다.
    ```
## 프로젝트

> 과제 -주택 금융 서비스 API개발 

> 개발일자:19.11.23


##  개발환경

> Back-end  

- JAVA

- Spring Boot

- JPA

- gradle gradle-5.6.4

- Lombok plugin


## 빌드

Visal studio code

Extension(Ctrl + shift + X)에서

```
1. Java Extension Pack 설치
2.Spring Boot Extension Pack 설치
3.Lombok Annotations Support for VS Code 설치

```

설치후 빌드

